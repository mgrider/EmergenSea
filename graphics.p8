pico-8 cartridge // http://www.pico-8.com
version 16
__lua__

local monster = {
	big_splash = {32, 34, 36, 34},
	small_splash = {54, 55},
	left = {18, 19, 20, 19},
	right = {2, 3, 4, 3},
	time = 0,
	submerge = 0
}

function monster:tick()
	self.time += 1/32
end

function monster:draw_head(x, y)
	clip()
	pal()
	
	local frame = self.big_splash[flr(5*self.time)%4 + 1]
	spr(frame, x - 8, x - 8, 2, 2)
	
	clip(0, 0, 128, y + 3)
	spr(0, x - 8, y - 13 + 16*self.submerge, 2, 2)
end

function monster:set_pal(active)
	pal()
	if active and self.time % 0.5 < 0.2 then
		pal(14, 8)
		pal(2 , 8)
	end
end

function monster:draw_left_tentacle(x, y, active)
	clip()
	self:set_pal(active)
	
	local frame = self.small_splash[flr(2.5*self.time)%2 + 1]
	spr(frame, x + 1, y - 4)
	
	clip(0, 0, 128, y)
	local frame = self.left[flr(6*self.time)%4 + 1]
	spr(frame, x, y - 8 + 8*self.submerge)
end

function monster:draw_right_tentacle(x, y, active)
	clip()
	self:set_pal(active)
	
	local frame = self.small_splash[flr(2.5*self.time)%2 + 1]
	spr(frame, x - 1, y - 4)
	
	clip(0, 0, 128, y)
	local frame = self.right[flr(6*self.time)%4 + 1]
	spr(frame, x, y - 8 + 8*self.submerge)
end

function monster:draw_target(x, y)
	clip()
	pal()
	
	local frame = self.big_splash[flr(5*self.time)%4 + 1]
	spr(frame, x - 8, y - 8, 2, 2)
	
	spr(40, x - 8, y - 11, 2, 2)
end

function _draw()
	cls(12)
	
	monster:tick()
	monster:draw_head(64, 64)
	monster:draw_left_tentacle(40, 64, true)
	monster:draw_right_tentacle(80, 64, false)
	
	monster:draw_target(12, 64)
end

__gfx__
00005555555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00005555555500000000ee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000555555550000000ee200000eee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
005577777777550000ee200000ee220000eeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000555555555500000e2000000e2000000e22e000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000eeeeeeeee00000e2000000e2000000e202000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000eee77ee77ee000ee200000ee200000ee200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000eee71ee17ee000ee200000ee200000ee200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00eeeeeeeeeeeee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00eee171711eeee00eee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00ee81111111eee0002ee0000eeee00000eee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00ee88171711eee00002ee000222ee000e22ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00eee88888eeee000002ee000002ee000e02ee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
002ee8ee8eeee20000002ee000002ee002002ee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0002eeeeeee2200000002ee000002ee000002ee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000022222220000000002ee000002ee000002ee00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000005505500000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000007777770000000000000000000000000000000044000000000000000000000000000000000000000000000000000
000000000000000000000777777000000007711111177000000000000000000000006670000ff000000000000000000000000000000000000000000000000000
00000777777000000007711111177000007110000001170000000000000000000000667000f88f00000000000000000000000000000000000000000000000000
00077111111770000071100000011700071000000000017000000000000000000000667000011000000000000000000000000000000000000000000000000000
00711000000117000710000000000170710000000000001700000000000000004444444444444444000000000000000000000000000000000000000000000000
00710000000017000710000000000170710000000000001700000000000000004499999999999944000000000000000000000000000000000000000000000000
00711000000117000710000000000170710000000000001700077000007777000444444444444440000000000000000000000000000000000000000000000000
00077111111770000071100000011700071000000000017000711700071111700449999999999440000000000000000000000000000000000000000000000000
00000777777000000007711111177000007110000001170007100170710000170044444444444400000000000000000000000000000000000000000000000000
00000000000000000000077777700000000771111117700000711700071111700004444444444000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000007777770000000077000007777000000000000000000000000000000000000000000000000000000000000000000
